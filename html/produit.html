<!doctype html>
<html lang="fr">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Fontawesome-->
    <script src="https://kit.fontawesome.com/1810ba3e26.js" crossorigin="anonymous"></script>
    <!--Css-->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel=stylesheet href="../public/css/style.css">
    <title>Orinoco Peluches</title>
  </head>
  <body id="body">
    <main class="contenu-page">
      <header>
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
              <a class="navbar-brand" href="../index.html"> <img class="logosize" src="../images/logoorinoco.png" alt="logo-orinoco"/> </a>
              <form class="d-flex">
                <a href="panier.html" class="btn btn-outline-danger"><i class="fas fa-shopping-cart panier">Panier</i></a>
              </form>
            </div>
          </nav>
      </header>
      <section>
        <h2>Collection Peluches Orinoco 2021</h2>
        <article id="container" class="container-card">
        </article>
      </section>
      <script>
      
        let container = document.getElementById("container");
       
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);

  
     
   
    fetch("http://localhost:3000/api/teddies/"+urlParams.get('id'))
    .then(function(res){
        return res.json(); 
        console.log(res);
    })
    .then(function(peluche){
      let imgDiv = document.createElement("div");
      imgDiv.classList.add("imgpart");
      let image = document.createElement("img");
      image.setAttribute("src", peluche.imageUrl);
      image.classList.add("img-produit")
   
      let infoDiv = document.createElement("div");
      infoDiv.classList.add("infopart");
      let pelucheNom = document.createElement("H5");
      pelucheNom.innerText=peluche.name; 
      let pPrice = document.createElement("p");
      pPrice.innerText = peluche.price/100+"â‚¬";
      let couleurs = peluche.colors;
      console.log(couleurs);
      let buttonPanier = document.createElement("button");
      buttonPanier.classList.add("btn", "btn-warning", "ajoutPanier");
      //butonPanier
      let ajouter = document.createElement("a");
      ajouter.classList.add("gopanier");
      ajouter.innerText="Ajouter au panier";
      ajouter.setAttribute("href", "#");
      buttonPanier.appendChild(ajouter);
    
      console.log(buttonPanier);

    
      //menu couleur
      let tab = document.createElement("div");
      let select = document.createElement("select");
      select.classList.add("form-select", "form-select-lg", "mb-3");
      select.setAttribute("aria-label", ".form-select-lg example");
      console.log(select);
      let option = document.createElement("option");
      option.setAttribute("selected", "");
      option.innerText="Couleurs";
      console.log(option);
      
      console.log(infoDiv);
      tab.appendChild(select);
      select.appendChild(option);
      let pDescription = document.createElement("p");
      pDescription.innerText= peluche.description ;
    

      console.log(pPrice);
      console.log(infoDiv);
      console.log(imgDiv);
      console.log(pPrice);

      container.appendChild(imgDiv);
      imgDiv.appendChild(image);
      container.appendChild(infoDiv);
      infoDiv.appendChild(pelucheNom);
      infoDiv.appendChild(tab);
      infoDiv.appendChild(pDescription);
      infoDiv.appendChild(pPrice);
      infoDiv.appendChild(buttonPanier);

      for(color of peluche.colors){
        let options = document.createElement("option");
        options.setAttribute("value", peluche.colors.indexOf(color));
        options.innerText=color;
        select.appendChild(options);
        console.log(tab);
      }
      // partie panier
      //let panier = document.getElementsByClassName("gopanier");
      //console.log (panier);
      buttonPanier.addEventListener("click", function(event){
        var panierPeluches = JSON.parse(localStorage.getItem("panier")) || [];
        panierPeluches.push(peluche);
        localStorage.setItem("panier", JSON.stringify(panierPeluches));
       })
    
    })
    .catch(function(err) {
      // Une erreur est survenue
    });      
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      <!-- Option 2: Separate Popper and Bootstrap JS -->
      <!--
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
      -->
      </main>
    </body>
  </html>