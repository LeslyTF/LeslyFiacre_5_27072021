<!doctype html>
<html lang="fr">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Fontawesome-->
    <script src="https://kit.fontawesome.com/1810ba3e26.js" crossorigin="anonymous"></script>
    <!--Css-->
    <link rel="stylesheet" href="public/css/style.css"/>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel=stylesheet href="style.css">
    <title>Hello, world!</title>
  </head>
  <body id="body">
    <main class="contenu-page">
      <header>
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
              <a class="navbar-brand" href="#"> <img class="logosize" src="images/logoorinoco.png" alt="logo-orinoco"/> </a>
              <form class="d-flex">
                <a href="#" class="btn btn-outline-danger"><i class="fas fa-shopping-cart panier">Panier</i></a>
              </form>
            </div>
          </nav>
      </header>
      <section>
        <h2>Collection Peluches Orinoco 2021</h2>
        <article id="container" class="container-card">
          <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
            <option selected>Open this select menu</option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
          </select>
        </article>
      </section>
      <script>
      
        let container = document.getElementById("container");
       
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);

  
     
   
    fetch("http://localhost:3000/api/teddies/"+urlParams.get('id'))
    .then(function(res){
        return res.json(); 
        console.log(res);
    })
    .then(function(peluche){
    console.log(peluche);
    let imgDiv = document.createElement("div");
    imgDiv.classList.add("imgpart");
    let image = document.createElement("img");
    image.setAttribute("src", peluche.imageUrl);
    console.log(image);
    let infoDiv = document.createElement("div");
    infoDiv.classList.add("infopart");
    let pelucheNom = document.createElement("H5");
    pelucheNom.innerText=peluche.name; 
    let pPrice = document.createElement("p");
    pPrice.innerText = peluche.price;
    let couleurs = peluche.colors;
    console.log(couleurs);
   
    //menu couleur
    let tab = document.createElement("div");
    let select = document.createElement("select");
    select.classList.add("form-select", "form-select-lg", "mb-3");
    select.setAttribute("aria-label", ".form-select-lg example");
    console.log(select);
    let option = document.createElement("option");
    option.setAttribute("selected", "");
    option.innerText="choix de couleurs";
    console.log(option);
    infoDiv.appendChild(tab);
    console.log(infoDiv);
    tab.appendChild(select);
    select.appendChild(option);
   
    for(color of peluche.colors){
    let options = document.createElement("option");
    options.setAttribute("value", peluche.colors.indexOf(color));
    options.innerText=color;
    select.appendChild(options);
    console.log(tab);
    }
 




    console.log(pPrice);
    console.log(infoDiv);
    console.log(imgDiv);
    console.log(pPrice);

    container.appendChild(imgDiv);
    imgDiv.appendChild(image);
    container.appendChild(infoDiv);
    infoDiv.appendChild(pelucheNom);
    infoDiv.appendChild(pPrice);

    })
    .catch(function(err) {
      // Une erreur est survenue
    });      
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      <!-- Option 2: Separate Popper and Bootstrap JS -->
      <!--
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
      -->
      </main>
    </body>
  </html>